import{J as u,f as H,j as _,aN as ee,c as te,r as V,h as E}from"./app-CQeDVQuS.js";import{s as $,H as se,a as J,u as L,C as U,p as ne}from"./pick-calendar-levels-props-DZFF4eOP.js";import{u as ae}from"./use-disclosure-CHrwo5eQ.js";import{u as W}from"./use-resolved-styles-api-BXRJnP4G.js";import{u as re}from"./InputBase-BmeHhBbi.js";import{I as O}from"./Input-BpqpINKS.js";import{P as F}from"./Popover-CRA-5r7S.js";function oe({type:s,date:t,locale:i,format:r,labelSeparator:D}){const a=P=>u(P).locale(i).format(r);return s==="default"?t===null?"":a(t):s==="multiple"?t.map(a).join(", "):s==="range"&&Array.isArray(t)?t[0]&&t[1]?`${a(t[0])} ${D} ${a(t[1])}`:t[0]?`${a(t[0])} ${D} `:"":""}function le({formatter:s,...t}){return(s||oe)(t)}function ue({minDate:s,maxDate:t,timezone:i}){const r=$("add",new Date,i);return!s&&!t?r:s&&u(r).isBefore(s)?s:t&&u(r).isAfter(t)?t:r}var q={input:"m_6fa5e2aa"};const ie={},z=H((s,t)=>{const{inputProps:i,wrapperProps:r,placeholder:D,classNames:a,styles:P,unstyled:g,popoverProps:m,modalProps:e,dropdownType:c,children:o,formattedValue:p,dropdownHandlers:d,dropdownOpened:f,onClick:I,clearable:T,onClear:y,clearButtonProps:j,rightSection:h,shouldClear:w,readOnly:x,disabled:n,value:l,name:C,form:k,type:b,...A}=re("PickerInputBase",ie,s),S=_.jsx(O.ClearButton,{onClick:y,unstyled:g,...j}),v=()=>{b==="range"&&Array.isArray(l)&&l[0]&&!l[1]&&y(),d.close()};return _.jsxs(_.Fragment,{children:[c==="modal"&&!x&&_.jsx(ee,{opened:f,onClose:v,withCloseButton:!1,size:"auto","data-dates-modal":!0,unstyled:g,...e,children:o}),_.jsx(O.Wrapper,{...r,children:_.jsxs(F,{position:"bottom-start",opened:f,trapFocus:!0,returnFocus:!1,unstyled:g,...m,disabled:(m==null?void 0:m.disabled)||c==="modal"||x,onChange:R=>{var B;R||((B=m==null?void 0:m.onClose)==null||B.call(m),v())},children:[_.jsx(F.Target,{children:_.jsx(O,{"data-dates-input":!0,"data-read-only":x||void 0,disabled:n,component:"button",type:"button",multiline:!0,onClick:R=>{I==null||I(R),d.toggle()},__clearSection:S,__clearable:T&&w&&!x&&!n,rightSection:h,...i,ref:t,classNames:{...a,input:te(q.input,a==null?void 0:a.input)},...A,children:p||_.jsx(O.Placeholder,{error:i.error,unstyled:g,className:a==null?void 0:a.placeholder,style:P==null?void 0:P.placeholder,children:D})})}),_.jsx(F.Dropdown,{"data-dates-dropdown":!0,children:o})]})}),_.jsx(se,{value:l,name:C,form:k,type:b})]})});z.classes=q;z.displayName="@mantine/dates/PickerInputBase";function Y(s,t){const i=[...t].sort((r,D)=>r.getTime()-D.getTime());return u(i[0]).startOf("day").subtract(1,"ms").isBefore(s)&&u(i[1]).endOf("day").add(1,"ms").isAfter(s)}function ce({type:s,level:t,value:i,defaultValue:r,onChange:D,allowSingleDateInRange:a,allowDeselect:P,onMouseLeave:g,applyTimezone:m=!0}){const[e,c]=J({type:s,value:i,defaultValue:r,onChange:D,applyTimezone:m}),[o,p]=V.useState(s==="range"&&e[0]&&!e[1]?e[0]:null),[d,f]=V.useState(null),I=n=>{if(s==="range"){if(o instanceof Date&&!e[1]){if(u(n).isSame(o,t)&&!a){p(null),f(null),c([null,null]);return}const l=[n,o];l.sort((C,k)=>C.getTime()-k.getTime()),c(l),f(null),p(null);return}if(e[0]&&!e[1]&&u(n).isSame(e[0],t)&&!a){p(null),f(null),c([null,null]);return}c([n,null]),f(null),p(n);return}if(s==="multiple"){e.some(l=>u(l).isSame(n,t))?c(e.filter(l=>!u(l).isSame(n,t))):c([...e,n]);return}e&&P&&u(n).isSame(e,t)?c(null):c(n)},T=n=>o instanceof Date&&d instanceof Date?Y(n,[d,o]):e[0]instanceof Date&&e[1]instanceof Date?Y(n,e):!1,y=s==="range"?n=>{g==null||g(n),f(null)}:g,j=n=>e[0]instanceof Date&&u(n).isSame(e[0],t)?!(d&&u(d).isBefore(e[0])):!1,h=n=>e[1]instanceof Date?u(n).isSame(e[1],t):!(e[0]instanceof Date)||!d?!1:u(d).isBefore(e[0])&&u(n).isSame(e[0],t),w=n=>{if(s==="range")return{selected:e.some(C=>C&&u(C).isSame(n,t)),inRange:T(n),firstInRange:j(n),lastInRange:h(n),"data-autofocus":!!e[0]&&u(e[0]).isSame(n,t)||void 0};if(s==="multiple")return{selected:e.some(C=>C&&u(C).isSame(n,t)),"data-autofocus":!!e[0]&&u(e[0]).isSame(n,t)||void 0};const l=u(e).isSame(n,t);return{selected:l,"data-autofocus":l||void 0}},x=s==="range"&&o?f:()=>{};return V.useEffect(()=>{if(s==="range")if(e[0]&&!e[1]&&(o==null?void 0:o.getTime())!==e[0].getTime())p(e[0]);else{const n=e[0]==null&&e[1]==null,l=e[0]!=null&&e[1]!=null;(n||l)&&(p(null),f(null))}},[e]),{onDateChange:I,onRootMouseLeave:y,onHoveredDateChange:x,getControlProps:w,_value:e,setValue:c}}const de={type:"default",defaultLevel:"month",numberOfColumns:1},N=H((s,t)=>{const i=E("DatePicker",de,s),{classNames:r,styles:D,vars:a,type:P,defaultValue:g,value:m,onChange:e,__staticSelector:c,getDayProps:o,allowSingleDateInRange:p,allowDeselect:d,onMouseLeave:f,numberOfColumns:I,hideOutsideDates:T,__onDayMouseEnter:y,__onDayClick:j,__timezoneApplied:h,...w}=i,{onDateChange:x,onRootMouseLeave:n,onHoveredDateChange:l,getControlProps:C}=ce({type:P,level:"day",allowDeselect:d,allowSingleDateInRange:p,value:m,defaultValue:g,onChange:e,onMouseLeave:f,applyTimezone:!h}),{resolvedClassNames:k,resolvedStyles:b}=W({classNames:r,styles:D,props:i}),A=L();return _.jsx(U,{ref:t,minLevel:"month",classNames:k,styles:b,__staticSelector:c||"DatePicker",onMouseLeave:n,numberOfColumns:I,hideOutsideDates:T??I!==1,__onDayMouseEnter:(S,v)=>{l(v),y==null||y(S,v)},__onDayClick:(S,v)=>{x(v),j==null||j(S,v)},getDayProps:S=>({...C(S),...o==null?void 0:o(S)}),...w,date:$("add",w.date,A.getTimezone(),h),__timezoneApplied:!0})});N.classes=U.classes;N.displayName="@mantine/dates/DatePicker";function fe({type:s,value:t,defaultValue:i,onChange:r,locale:D,format:a,closeOnChange:P,sortDates:g,labelSeparator:m,valueFormatter:e}){const c=L(),[o,p]=ae(!1),[d,f]=J({type:s,value:t,defaultValue:i,onChange:r}),I=le({type:s,date:d,locale:c.getLocale(D),format:a,labelSeparator:c.getLabelSeparator(m),formatter:e}),T=h=>{P&&(s==="default"&&p.close(),s==="range"&&h[0]&&h[1]&&p.close()),f(g&&s==="multiple"?[...h].sort((w,x)=>w.getTime()-x.getTime()):h)},y=()=>T(s==="range"?[null,null]:s==="multiple"?[]:null),j=s==="range"?!!d[0]:s==="multiple"?d.length>0:d!==null;return{_value:d,setValue:T,onClear:y,shouldClear:j,formattedValue:I,dropdownOpened:o,dropdownHandlers:p}}const me={type:"default",valueFormat:"MMMM D, YYYY",closeOnChange:!0,sortDates:!0,dropdownType:"popover"},G=H((s,t)=>{const i=E("DatePickerInput",me,s),{type:r,value:D,defaultValue:a,onChange:P,valueFormat:g,labelSeparator:m,locale:e,classNames:c,styles:o,unstyled:p,closeOnChange:d,size:f,variant:I,dropdownType:T,sortDates:y,minDate:j,maxDate:h,vars:w,defaultDate:x,valueFormatter:n,...l}=i,{resolvedClassNames:C,resolvedStyles:k}=W({classNames:c,styles:o,props:i}),{calendarProps:b,others:A}=ne(l),{_value:S,setValue:v,formattedValue:R,dropdownHandlers:B,dropdownOpened:K,onClear:Q,shouldClear:X}=fe({type:r,value:D,defaultValue:a,onChange:P,locale:e,format:g,labelSeparator:m,closeOnChange:d,sortDates:y,valueFormatter:n}),Z=Array.isArray(S)?S[0]||x:S||x,M=L();return _.jsx(z,{formattedValue:R,dropdownOpened:K,dropdownHandlers:B,classNames:C,styles:k,unstyled:p,ref:t,onClear:Q,shouldClear:X,value:S,size:f,variant:I,dropdownType:T,...A,type:r,__staticSelector:"DatePickerInput",children:_.jsx(N,{...b,size:f,variant:I,type:r,value:S,defaultDate:Z||ue({maxDate:h,minDate:j,timezone:M.getTimezone()}),onChange:v,locale:e,classNames:C,styles:k,unstyled:p,__staticSelector:"DatePickerInput",__stopPropagation:T==="popover",minDate:j,maxDate:h,date:$("add",b.date,M.getTimezone()),__timezoneApplied:!0})})});G.classes={...z.classes,...N.classes};G.displayName="@mantine/dates/DatePickerInput";export{G as D};
