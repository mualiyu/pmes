import{r as i,C as h}from"./app-CQeDVQuS.js";function p(e,a="use-local-storage"){try{return JSON.stringify(e)}catch{throw new Error(`@mantine/hooks ${a}: Failed to serialize the value`)}}function F(e){try{return e&&JSON.parse(e)}catch{return e}}function N(e){return{getItem:r=>{try{return window[e].getItem(r)}catch{return console.warn("use-local-storage: Failed to get value from storage, localStorage is blocked"),null}},setItem:(r,l)=>{try{window[e].setItem(r,l)}catch{console.warn("use-local-storage: Failed to set value to storage, localStorage is blocked")}},removeItem:r=>{try{window[e].removeItem(r)}catch{console.warn("use-local-storage: Failed to remove value from storage, localStorage is blocked")}}}}function O(e,a){const s="mantine-local-storage",{getItem:f,setItem:r,removeItem:l}=N(e);return function({key:o,defaultValue:n,getInitialValueInEffect:C=!0,sync:v=!0,deserialize:S=F,serialize:I=w=>p(w,a)}){const w=i.useCallback(t=>{let c;try{c=typeof window>"u"||!(e in window)||window[e]===null||!!t}catch{c=!0}if(c)return n;const u=f(o);return u!==null?S(u):n},[o,n]),[d,g]=i.useState(w(C)),m=i.useCallback(t=>{t instanceof Function?g(c=>{const u=t(c);return r(o,I(u)),window.dispatchEvent(new CustomEvent(s,{detail:{key:o,value:t(c)}})),u}):(r(o,I(t)),window.dispatchEvent(new CustomEvent(s,{detail:{key:o,value:t}})),g(t))},[o]),b=i.useCallback(()=>{l(o),window.dispatchEvent(new CustomEvent(s,{detail:{key:o,value:n}}))},[]);return h("storage",t=>{v&&t.storageArea===window[e]&&t.key===o&&g(S(t.newValue??void 0))}),h(s,t=>{v&&t.detail.key===o&&g(t.detail.value)}),i.useEffect(()=>{n!==void 0&&d===void 0&&m(n)},[n,d,m]),i.useEffect(()=>{const t=w();t!==void 0&&m(t)},[o]),[d===void 0?n:d,m,b]}}function k(e){return O("localStorage","use-local-storage")(e)}function x(){const[e,a]=k({key:"tasks-view",defaultValue:"list",getInitialValueInEffect:!1});return{tasksView:e,setTasksView:a}}export{x as u};
