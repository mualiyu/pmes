import{r as c,f as Ce,h as we,Y as ye,j as a}from"./app-CQeDVQuS.js";import{u as De}from"./use-resolved-styles-api-BXRJnP4G.js";import{g as Oe,a as Ie,O as Pe}from"./OptionsDropdown-D2SabLis.js";import{u as je,C as d}from"./Combobox-CG5rkmIX.js";import{I as L}from"./InputBase-BmeHhBbi.js";import{u as z}from"./use-uncontrolled-DDoK6Wjp.js";function Ee(p){const f=c.useRef(void 0);return c.useEffect(()=>{f.current=p},[p]),f.current}const Ve={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},U=Ce((p,f)=>{const k=we("Select",Ve,p),{classNames:W,styles:Y,unstyled:h,vars:ke,dropdownOpened:$,defaultDropdownOpened:q,onDropdownClose:_,onDropdownOpen:v,onFocus:C,onBlur:w,onClick:y,onChange:G,data:D,value:m,defaultValue:J,selectFirstOptionOnChange:O,onOptionSubmit:I,comboboxProps:K,readOnly:b,disabled:g,filter:Q,limit:X,withScrollArea:Z,maxDropdownHeight:ee,size:P,searchable:n,rightSection:oe,checkIconPosition:te,withCheckIcon:le,nothingFoundMessage:F,name:se,form:ae,searchValue:ne,defaultSearchValue:re,onSearchChange:ce,allowDeselect:ie,error:N,rightSectionPointerEvents:ue,id:de,clearable:pe,clearButtonProps:fe,hiddenInputProps:he,renderOption:me,onClear:j,autoComplete:be,scrollAreaProps:ge,__defaultRightSection:Fe,__clearSection:Ne,__clearable:Re,chevronColor:Se,...S}=k,E=c.useMemo(()=>Oe(D),[D]),i=c.useMemo(()=>Ie(E),[E]),R=ye(de),[o,B,A]=z({value:m,defaultValue:J,finalValue:null,onChange:G}),l=typeof o=="string"?i[o]:void 0,u=Ee(l),[x,xe,_e]=z({value:ne,defaultValue:re,finalValue:l?l.label:"",onChange:ce}),t=je({opened:$,defaultOpened:q,onDropdownOpen:()=>{v==null||v(),t.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{_==null||_(),t.resetSelectedOption()}}),r=e=>{xe(e),t.resetSelectedOption()},{resolvedClassNames:M,resolvedStyles:T}=De({props:k,styles:Y,classNames:W});c.useEffect(()=>{O&&t.selectFirstOption()},[O,x]),c.useEffect(()=>{m===null&&r(""),typeof m=="string"&&l&&((u==null?void 0:u.value)!==l.value||(u==null?void 0:u.label)!==l.label)&&r(l.label)},[m,l]),c.useEffect(()=>{var e;!A&&!_e&&r(typeof o=="string"&&((e=i[o])==null?void 0:e.label)||"")},[D,o]);const ve=a.jsx(d.ClearButton,{...fe,onClear:()=>{B(null,null),r(""),j==null||j()}}),H=pe&&!!o&&!g&&!b;return a.jsxs(a.Fragment,{children:[a.jsxs(d,{store:t,__staticSelector:"Select",classNames:M,styles:T,unstyled:h,readOnly:b,onOptionSubmit:e=>{I==null||I(e);const s=ie&&i[e].value===o?null:i[e],V=s?s.value:null;V!==o&&B(V,s),!A&&r(typeof V=="string"&&(s==null?void 0:s.label)||""),t.closeDropdown()},size:P,...K,children:[a.jsx(d.Target,{targetType:n?"input":"button",autoComplete:be,children:a.jsx(L,{id:R,ref:f,__defaultRightSection:a.jsx(d.Chevron,{size:P,error:N,unstyled:h,color:Se}),__clearSection:ve,__clearable:H,rightSection:oe,rightSectionPointerEvents:ue||(H?"all":"none"),...S,size:P,__staticSelector:"Select",disabled:g,readOnly:b||!n,value:x,onChange:e=>{r(e.currentTarget.value),t.openDropdown(),O&&t.selectFirstOption()},onFocus:e=>{n&&t.openDropdown(),C==null||C(e)},onBlur:e=>{var s;n&&t.closeDropdown(),r(o!=null&&((s=i[o])==null?void 0:s.label)||""),w==null||w(e)},onClick:e=>{n?t.openDropdown():t.toggleDropdown(),y==null||y(e)},classNames:M,styles:T,unstyled:h,pointer:!n,error:N})}),a.jsx(Pe,{data:E,hidden:b||g,filter:Q,search:x,limit:X,hiddenWhenEmpty:!F,withScrollArea:Z,maxDropdownHeight:ee,filterOptions:n&&(l==null?void 0:l.label)!==x,value:o,checkIconPosition:te,withCheckIcon:le,nothingFoundMessage:F,unstyled:h,labelId:S.label?`${R}-label`:void 0,"aria-label":S.label?void 0:S["aria-label"],renderOption:me,scrollAreaProps:ge})]}),a.jsx(d.HiddenInput,{value:o,name:se,form:ae,disabled:g,...he})]})});U.classes={...L.classes,...d.classes};U.displayName="@mantine/core/Select";export{U as S};
