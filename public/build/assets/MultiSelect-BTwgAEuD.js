import{f as Xe,h as Ze,Y as et,ar as tt,i as st,j as o,r as ot}from"./app-CQeDVQuS.js";import{u as rt}from"./use-resolved-styles-api-BXRJnP4G.js";import{i as lt,g as nt,a as at,O as it}from"./OptionsDropdown-D2SabLis.js";import{u as ct,C as p}from"./Combobox-CG5rkmIX.js";import{I as dt}from"./InputBase-BmeHhBbi.js";import{P as q}from"./Pill-tisBWBts.js";import{P as K}from"./PillsInput-BdX_zTjY.js";import{u as U}from"./use-uncontrolled-DDoK6Wjp.js";function pt({data:x,value:P}){const a=P.map(i=>i.trim().toLowerCase());return x.reduce((i,c)=>(lt(c)?i.push({group:c.group,items:c.items.filter(m=>a.indexOf(m.value.toLowerCase().trim())===-1)}):a.indexOf(c.value.toLowerCase().trim())===-1&&i.push(c),i),[])}const ut={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},Y=Xe((x,P)=>{const a=Ze("MultiSelect",ut,x),{classNames:v,className:i,style:c,styles:m,unstyled:n,vars:ht,size:b,value:J,defaultValue:Q,onChange:R,onKeyDown:w,variant:X,data:Z,dropdownOpened:ee,defaultDropdownOpened:te,onDropdownOpen:se,onDropdownClose:y,selectFirstOptionOnChange:O,onOptionSubmit:C,comboboxProps:oe,filter:re,limit:le,withScrollArea:ne,maxDropdownHeight:ae,searchValue:ie,defaultSearchValue:ce,onSearchChange:de,readOnly:h,disabled:d,onFocus:D,onBlur:I,radius:pe,rightSection:ue,rightSectionWidth:he,rightSectionPointerEvents:F,rightSectionProps:fe,leftSection:me,leftSectionWidth:ge,leftSectionPointerEvents:Se,leftSectionProps:xe,inputContainer:Pe,inputWrapperOrder:ve,withAsterisk:be,labelProps:we,descriptionProps:ye,errorProps:Oe,wrapperProps:Ce,description:De,label:_,error:B,maxValues:Ie,searchable:r,nothingFoundMessage:L,withCheckIcon:_e,checkIconPosition:Ve,hidePickedOptions:je,withErrorStyles:ke,name:Ee,form:Me,id:Fe,clearable:Be,clearButtonProps:Le,hiddenInputProps:Ne,placeholder:N,hiddenInputValuesDivider:Ae,required:We,mod:Te,renderOption:$e,onRemove:l,onClear:V,scrollAreaProps:ze,chevronColor:Ge,...A}=a,j=et(Fe),k=nt(Z),u=at(k),s=ct({opened:ee,defaultOpened:te,onDropdownOpen:se,onDropdownClose:()=>{y==null||y(),s.resetSelectedOption()}}),{styleProps:He,rest:{type:ft,autoComplete:qe,...Ke}}=tt(A),[t,f]=U({value:J,defaultValue:Q,finalValue:[],onChange:R}),[g,Ue]=U({value:ie,defaultValue:ce,finalValue:"",onChange:de}),S=e=>{Ue(e),s.resetSelectedOption()},E=st({name:"MultiSelect",classes:{},props:a,classNames:v,styles:m,unstyled:n}),{resolvedClassNames:W,resolvedStyles:T}=rt({props:a,styles:m,classNames:v}),Ye=e=>{w==null||w(e),e.key===" "&&!r&&(e.preventDefault(),s.toggleDropdown()),e.key==="Backspace"&&g.length===0&&t.length>0&&(l==null||l(t[t.length-1]),f(t.slice(0,t.length-1)))},Je=t.map((e,M)=>{var G,H;return o.jsx(q,{withRemoveButton:!h&&!((G=u[e])!=null&&G.disabled),onRemove:()=>{f(t.filter(Re=>e!==Re)),l==null||l(e)},unstyled:n,disabled:d,...E("pill"),children:((H=u[e])==null?void 0:H.label)||e},`${e}-${M}`)});ot.useEffect(()=>{O&&s.selectFirstOption()},[O,g]);const $=o.jsx(p.ClearButton,{...Le,onClear:()=>{V==null||V(),f([]),S("")}}),Qe=pt({data:k,value:t}),z=Be&&t.length>0&&!d&&!h;return o.jsxs(o.Fragment,{children:[o.jsxs(p,{store:s,classNames:W,styles:T,unstyled:n,size:b,readOnly:h,__staticSelector:"MultiSelect",onOptionSubmit:e=>{C==null||C(e),S(""),s.updateSelectedOptionIndex("selected"),t.includes(u[e].value)?(f(t.filter(M=>M!==u[e].value)),l==null||l(u[e].value)):t.length<Ie&&f([...t,u[e].value])},...oe,children:[o.jsx(p.DropdownTarget,{children:o.jsx(K,{...He,__staticSelector:"MultiSelect",classNames:W,styles:T,unstyled:n,size:b,className:i,style:c,variant:X,disabled:d,radius:pe,__defaultRightSection:o.jsx(p.Chevron,{size:b,error:B,unstyled:n,color:Ge}),__clearSection:$,__clearable:z,rightSection:ue,rightSectionPointerEvents:F||($?"all":"none"),rightSectionWidth:he,rightSectionProps:fe,leftSection:me,leftSectionWidth:ge,leftSectionPointerEvents:Se,leftSectionProps:xe,inputContainer:Pe,inputWrapperOrder:ve,withAsterisk:be,labelProps:we,descriptionProps:ye,errorProps:Oe,wrapperProps:Ce,description:De,label:_,error:B,withErrorStyles:ke,__stylesApiProps:{...a,rightSectionPointerEvents:F||(z?"all":"none"),multiline:!0},pointer:!r,onClick:()=>r?s.openDropdown():s.toggleDropdown(),"data-expanded":s.dropdownOpened||void 0,id:j,required:We,mod:Te,children:o.jsxs(q.Group,{disabled:d,unstyled:n,...E("pillsList"),children:[Je,o.jsx(p.EventsTarget,{autoComplete:qe,children:o.jsx(K.Field,{...Ke,ref:P,id:j,placeholder:N,type:!r&&!N?"hidden":"visible",...E("inputField"),unstyled:n,onFocus:e=>{D==null||D(e),r&&s.openDropdown()},onBlur:e=>{I==null||I(e),s.closeDropdown(),S("")},onKeyDown:Ye,value:g,onChange:e=>{S(e.currentTarget.value),r&&s.openDropdown(),O&&s.selectFirstOption()},disabled:d,readOnly:h||!r,pointer:!r})})]})})}),o.jsx(it,{data:je?Qe:k,hidden:h||d,filter:re,search:g,limit:le,hiddenWhenEmpty:!L,withScrollArea:ne,maxDropdownHeight:ae,filterOptions:r,value:t,checkIconPosition:Ve,withCheckIcon:_e,nothingFoundMessage:L,unstyled:n,labelId:_?`${j}-label`:void 0,"aria-label":_?void 0:A["aria-label"],renderOption:$e,scrollAreaProps:ze})]}),o.jsx(p.HiddenInput,{name:Ee,valuesDivider:Ae,value:t,form:Me,disabled:d,...Ne})]})});Y.classes={...dt.classes,...p.classes};Y.displayName="@mantine/core/MultiSelect";export{Y as M};
