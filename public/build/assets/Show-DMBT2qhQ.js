import{s as re,f as D,h as F,j as e,B as V,u as ne,a0 as de,U as le,e as ee,Y as oe,i as ce,k as me,F as pe,E as xe,X as he,G as d,b as f}from"./app-CQeDVQuS.js";import{a as y}from"./route-DnWyDX0p.js";import{I as je,M as ue}from"./MainLayout-DgTNt_5R.js";import{g as Y}from"./user-IyQLa11_.js";import{G as n}from"./Grid-BmsYC7q1.js";import{T as w}from"./Title-DbfSRF69.js";import{T as i}from"./Text-C7Ogcti-.js";import{c as se}from"./createReactComponent-Z0-s2Pq0.js";import{I as H}from"./IconUsers-BxnTG7FS.js";import{I as ge}from"./IconEdit-BCZfl_Xd.js";import{C as j}from"./Card-DwGgF3HL.js";import{P as M}from"./Progress-C2RpPkNr.js";import{g as X}from"./get-safe-id-Bp3H8K0-.js";import{g as be}from"./get-auto-contrast-value-Da6zqqWm.js";import{a as ve}from"./Menu-CcsqEZJx.js";import{u as fe}from"./use-uncontrolled-DDoK6Wjp.js";import{I as ye}from"./IconTarget-DgCcLpGC.js";import{I as we}from"./IconCurrencyDollar-CS5O79R9.js";import{S as N}from"./Stack-DnbdV9Zg.js";import{A as q}from"./Avatar-D4Eflhk8.js";import{I as J}from"./IconPlus-BFuYsGRM.js";import{B as Q}from"./Badge-CLC16t3z.js";import"./_baseClone-CRHU6voy.js";import"./FlashNotification-B31qGpz5.js";import"./use-disclosure-CHrwo5eQ.js";import"./IconInfoCircle-BGpsp2Nq.js";import"./IconCircleX-D9_CrJfg.js";import"./useWebSockets-MQGIohH9.js";import"./with-selector-Dx34AVcc.js";import"./index-DSj5ND_Q.js";import"./useTaskGroupsStore-CDXuzMdx.js";import"./reorder-Cl5rjXcS.js";import"./useTasksStore-DWoe4t5E.js";import"./use-computed-color-scheme-DWNI3ZFj.js";import"./noop-BjFrJKj1.js";import"./get-style-object-DUJZA7T_.js";import"./upper-first-sQkIoMXG.js";import"./IconLayoutList-CL4hKEJq.js";import"./EmptyWithIcon-BBQw9Ob4.js";import"./datetime-BgfhEWkv.js";import"./IconMessage-BX9ygqxW.js";import"./ActionIcon-CLNruuHn.js";import"./Center-Bqx9e1q2.js";import"./get-sorted-breakpoints-iwMx6bI5.js";import"./get-base-value-JqT_q0U7.js";import"./use-resolved-styles-api-BXRJnP4G.js";import"./Popover-CRA-5r7S.js";import"./use-floating-auto-update-DtQKRGxQ.js";const[_e,K]=re("Tabs component was not found in the tree");var k={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const ze={},G=D((s,m)=>{const l=F("TabsList",ze,s),{children:p,className:g,grow:h,justify:x,classNames:o,styles:u,style:v,mod:b,...t}=l,a=K();return e.jsx(V,{...t,...a.getStyles("list",{className:g,style:v,classNames:o,styles:u,props:l,variant:a.variant}),ref:m,role:"tablist",variant:a.variant,mod:[{grow:h,orientation:a.orientation,placement:a.orientation==="vertical"&&a.placement,inverted:a.inverted},b],"aria-orientation":a.orientation,__vars:{"--tabs-justify":x},children:p})});G.classes=k;G.displayName="@mantine/core/TabsList";const Te={},O=D((s,m)=>{const l=F("TabsPanel",Te,s),{children:p,className:g,value:h,classNames:x,styles:o,style:u,mod:v,keepMounted:b,...t}=l,a=K(),_=a.value===h,z=a.keepMounted||b||_?p:null;return e.jsx(V,{...t,...a.getStyles("panel",{className:g,classNames:x,styles:o,style:[u,_?void 0:{display:"none"}],props:l}),ref:m,mod:[{orientation:a.orientation},v],role:"tabpanel",id:a.getPanelId(h),"aria-labelledby":a.getTabId(h),children:z})});O.classes=k;O.displayName="@mantine/core/TabsPanel";const Ce={},$=D((s,m)=>{const l=F("TabsTab",Ce,s),{className:p,children:g,rightSection:h,leftSection:x,value:o,onClick:u,onKeyDown:v,disabled:b,color:t,style:a,classNames:_,styles:z,vars:A,mod:S,tabIndex:B,...R}=l,E=ne(),{dir:P}=de(),r=K(),T=o===r.value,U=L=>{r.onChange(r.allowTabDeactivation&&o===r.value?null:o),u==null||u(L)},C={classNames:_,styles:z,props:l};return e.jsxs(le,{...R,...r.getStyles("tab",{className:p,style:a,variant:r.variant,...C}),disabled:b,unstyled:r.unstyled,variant:r.variant,mod:[{active:T,disabled:b,orientation:r.orientation,inverted:r.inverted,placement:r.orientation==="vertical"&&r.placement},S],ref:m,role:"tab",id:r.getTabId(o),"aria-selected":T,tabIndex:B!==void 0?B:T||r.value===null?0:-1,"aria-controls":r.getPanelId(o),onClick:U,__vars:{"--tabs-color":t?ee(t,E):void 0},onKeyDown:ve({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:r.activateTabWithKeyboard,loop:r.loop,orientation:r.orientation||"horizontal",dir:P,onKeyDown:v}),children:[x&&e.jsx("span",{...r.getStyles("tabSection",C),"data-position":"left",children:x}),g&&e.jsx("span",{...r.getStyles("tabLabel",C),children:g}),h&&e.jsx("span",{...r.getStyles("tabSection",C),"data-position":"right",children:h})]})});$.classes=k;$.displayName="@mantine/core/TabsTab";const Z="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",ke={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},Se=me((s,{radius:m,color:l,autoContrast:p})=>({root:{"--tabs-radius":xe(m),"--tabs-color":ee(l,s),"--tabs-text-color":be(p,s)?pe({color:l,theme:s,autoContrast:p}):void 0}})),c=D((s,m)=>{const l=F("Tabs",ke,s),{defaultValue:p,value:g,onChange:h,orientation:x,children:o,loop:u,id:v,activateTabWithKeyboard:b,allowTabDeactivation:t,variant:a,color:_,radius:z,inverted:A,placement:S,keepMounted:B,classNames:R,styles:E,unstyled:P,className:r,style:T,vars:U,autoContrast:C,mod:L,...te}=l,I=oe(v),[ie,ae]=fe({value:g,defaultValue:p,finalValue:null,onChange:h}),W=ce({name:"Tabs",props:l,classes:k,className:r,style:T,classNames:R,styles:E,unstyled:P,vars:U,varsResolver:Se});return e.jsx(_e,{value:{placement:S,value:ie,orientation:x,id:I,loop:u,activateTabWithKeyboard:b,getTabId:X(`${I}-tab`,Z),getPanelId:X(`${I}-panel`,Z),onChange:ae,allowTabDeactivation:t,variant:a,color:_,radius:z,inverted:A,keepMounted:B,unstyled:P,getStyles:W},children:e.jsx(V,{ref:m,id:I,variant:a,mod:[{orientation:x,inverted:x==="horizontal"&&A,placement:x==="vertical"&&S},L],...W("root"),...te,children:o})})});c.classes=k;c.displayName="@mantine/core/Tabs";c.Tab=$;c.Panel=O;c.List=G;/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Be=se("outline","building-bank","IconBuildingBank",[["path",{d:"M3 21l18 0",key:"svg-0"}],["path",{d:"M3 10l18 0",key:"svg-1"}],["path",{d:"M5 6l7 -3l7 3",key:"svg-2"}],["path",{d:"M4 10l0 11",key:"svg-3"}],["path",{d:"M20 10l0 11",key:"svg-4"}],["path",{d:"M8 14l0 3",key:"svg-5"}],["path",{d:"M12 14l0 3",key:"svg-6"}],["path",{d:"M16 14l0 3",key:"svg-7"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Pe=se("outline","file-text","IconFileText",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M9 9l1 0",key:"svg-2"}],["path",{d:"M9 13l6 0",key:"svg-3"}],["path",{d:"M9 17l6 0",key:"svg-4"}]]);const Ie=()=>{var h,x,o,u,v,b;const{project:s}=he().props,m=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"NGN",minimumFractionDigits:0}).format(t),l=t=>({not_started:"gray",in_progress:"blue",completed:"green",delayed:"red",cancelled:"dark",draft:"gray",approved:"blue",active:"green",exceeded:"red",closed:"dark"})[t]||"gray",p=s.all_tasks_count>0?s.completed_tasks_count/s.all_tasks_count*100:0,g=s.total_milestones_count>0?s.completed_milestones_count/s.total_milestones_count*100:0;return e.jsxs(e.Fragment,{children:[e.jsxs(n,{justify:"space-between",align:"flex-start",mb:"xl",children:[e.jsx(n.Col,{span:"auto",children:e.jsx(d,{gap:"md",align:"flex-start",children:e.jsxs("div",{children:[e.jsx(w,{order:1,mb:"xs",children:s.name}),e.jsxs(d,{gap:"md",children:[e.jsxs(i,{c:"dimmed",size:"sm",children:[e.jsx(Be,{size:16,style:{verticalAlign:"middle"}})," ",((h=s.client_company)==null?void 0:h.name)||"No client"]}),s.directorate&&e.jsxs(i,{c:"dimmed",size:"sm",children:[e.jsx(H,{size:16,style:{verticalAlign:"middle"}})," ",s.directorate.name]})]})]})})}),e.jsx(n.Col,{span:"content",children:e.jsxs(d,{children:[can("edit project")&&e.jsx(f,{leftSection:e.jsx(ge,{size:16}),variant:"light",onClick:()=>y("projects.edit",{project:s.id}),children:"Edit Project"}),e.jsx(f,{leftSection:e.jsx(Pe,{size:16}),onClick:()=>y("projects.tasks",{project:s.id}),children:"View Indicators"})]})})]}),e.jsxs(n,{mb:"xl",children:[e.jsx(n.Col,{span:{base:12,sm:6,md:3},children:e.jsxs(j,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:[e.jsx(i,{size:"xs",c:"dimmed",tt:"uppercase",fw:700,children:"Indicators"}),e.jsxs(i,{size:"32px",fw:700,mt:"xs",children:[s.completed_tasks_count,"/",s.all_tasks_count]}),e.jsx(M,{value:p,mt:"md",color:"blue"}),e.jsxs(i,{size:"xs",c:"dimmed",mt:"xs",children:[p.toFixed(1),"% completed"]})]})}),e.jsx(n.Col,{span:{base:12,sm:6,md:3},children:e.jsxs(j,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:[e.jsx(i,{size:"xs",c:"dimmed",tt:"uppercase",fw:700,children:"Milestones"}),e.jsxs(i,{size:"32px",fw:700,mt:"xs",children:[s.completed_milestones_count,"/",s.total_milestones_count]}),e.jsx(M,{value:g,mt:"md",color:"green"}),e.jsxs(i,{size:"xs",c:"dimmed",mt:"xs",children:[g.toFixed(1),"% completed"]})]})}),e.jsx(n.Col,{span:{base:12,sm:6,md:3},children:e.jsxs(j,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:[e.jsx(i,{size:"xs",c:"dimmed",tt:"uppercase",fw:700,children:"Budgets"}),e.jsx(i,{size:"32px",fw:700,mt:"xs",children:s.total_budgets_count}),e.jsx(i,{size:"sm",c:"dimmed",mt:"md",children:"Active budget plans"})]})}),e.jsx(n.Col,{span:{base:12,sm:6,md:3},children:e.jsxs(j,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:[e.jsx(i,{size:"xs",c:"dimmed",tt:"uppercase",fw:700,children:"Overdue"}),e.jsx(i,{size:"32px",fw:700,mt:"xs",c:"red",children:s.overdue_tasks_count}),e.jsx(i,{size:"sm",c:"dimmed",mt:"md",children:"Overdue indicators"})]})})]}),e.jsxs(c,{defaultValue:"overview",variant:"pills",children:[e.jsxs(c.List,{mb:"xl",children:[e.jsx(c.Tab,{value:"overview",leftSection:e.jsx(je,{size:16}),children:"Overview"}),e.jsxs(c.Tab,{value:"milestones",leftSection:e.jsx(ye,{size:16}),children:["Milestones (",s.total_milestones_count,")"]}),e.jsxs(c.Tab,{value:"budgets",leftSection:e.jsx(we,{size:16}),children:["Budgets (",s.total_budgets_count,")"]}),e.jsxs(c.Tab,{value:"team",leftSection:e.jsx(H,{size:16}),children:["Team (",((x=s.users)==null?void 0:x.length)||0,")"]})]}),e.jsx(c.Panel,{value:"overview",children:e.jsxs(n,{children:[e.jsxs(n.Col,{span:{base:12,md:8},children:[e.jsxs(j,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,mb:"lg",children:[e.jsx(w,{order:3,mb:"md",children:"Project Description"}),s.description?e.jsx(i,{children:s.description}):e.jsx(i,{c:"dimmed",fs:"italic",children:"No description provided"})]}),e.jsxs(j,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:[e.jsx(w,{order:3,mb:"md",children:"Project Details"}),e.jsxs(N,{gap:"md",children:[e.jsxs(d,{justify:"space-between",children:[e.jsx(i,{fw:500,children:"Client/Company:"}),e.jsx(i,{children:((o=s.client_company)==null?void 0:o.name)||"N/A"})]}),s.directorate&&e.jsxs(d,{justify:"space-between",children:[e.jsx(i,{fw:500,children:"Directorate:"}),e.jsx(i,{children:s.directorate.name})]}),((u=s.client_company)==null?void 0:u.email)&&e.jsxs(d,{justify:"space-between",children:[e.jsx(i,{fw:500,children:"Email:"}),e.jsx(i,{children:s.client_company.email})]}),((v=s.client_company)==null?void 0:v.phone)&&e.jsxs(d,{justify:"space-between",children:[e.jsx(i,{fw:500,children:"Phone:"}),e.jsx(i,{children:s.client_company.phone})]}),((b=s.client_company)==null?void 0:b.address)&&e.jsxs(d,{justify:"space-between",children:[e.jsx(i,{fw:500,children:"Address:"}),e.jsx(i,{children:s.client_company.address})]})]})]})]}),e.jsx(n.Col,{span:{base:12,md:4},children:e.jsxs(j,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:[e.jsx(w,{order:3,mb:"md",children:"Team Members"}),e.jsx(N,{gap:"md",children:s.users&&s.users.length>0?s.users.map(t=>e.jsxs(d,{children:[e.jsx(q,{src:t.avatar,radius:"xl",children:Y(t.name)}),e.jsxs("div",{children:[e.jsx(i,{size:"sm",fw:500,children:t.name}),e.jsx(i,{size:"xs",c:"dimmed",children:t.email})]})]},t.id)):e.jsx(i,{c:"dimmed",fs:"italic",children:"No team members assigned"})})]})})]})}),e.jsxs(c.Panel,{value:"milestones",children:[e.jsxs(d,{justify:"space-between",mb:"md",children:[e.jsxs("div",{children:[e.jsx(w,{order:3,children:"Project Milestones"}),e.jsx(i,{c:"dimmed",size:"sm",children:"Track and manage project milestones"})]}),can("create project")&&e.jsx(f,{leftSection:e.jsx(J,{size:16}),onClick:()=>y("projects.milestones.create",{project:s.id}),children:"Add Milestone"})]}),s.milestones&&s.milestones.length>0?e.jsx(N,{gap:"md",children:s.milestones.map(t=>e.jsxs(j,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:[e.jsxs(d,{justify:"space-between",mb:"md",children:[e.jsxs("div",{children:[e.jsxs(d,{gap:"sm",children:[e.jsx(i,{fw:600,size:"lg",children:t.name}),e.jsx(Q,{color:l(t.status),children:t.status.replace(/_/g," ").toUpperCase()})]}),t.description&&e.jsx(i,{c:"dimmed",size:"sm",mt:"xs",children:t.description})]}),can("edit project")&&e.jsx(f,{size:"xs",variant:"light",onClick:()=>y("projects.milestones.edit",{project:s.id,milestone:t.id}),children:"Edit"})]}),e.jsxs(n,{children:[e.jsxs(n.Col,{span:{base:12,sm:6,md:3},children:[e.jsx(i,{size:"xs",c:"dimmed",mb:"xs",children:"Progress"}),e.jsx(M,{value:t.progress,color:t.progress>=75?"green":t.progress>=50?"yellow":"orange",size:"lg"}),e.jsxs(i,{size:"sm",mt:"xs",children:[t.progress,"%"]})]}),t.start_date&&e.jsxs(n.Col,{span:{base:12,sm:6,md:3},children:[e.jsx(i,{size:"xs",c:"dimmed",children:"Start Date"}),e.jsx(i,{size:"sm",children:t.start_date})]}),t.end_date&&e.jsxs(n.Col,{span:{base:12,sm:6,md:3},children:[e.jsx(i,{size:"xs",c:"dimmed",children:"End Date"}),e.jsx(i,{size:"sm",children:t.end_date})]}),t.budget_allocated>0&&e.jsxs(n.Col,{span:{base:12,sm:6,md:3},children:[e.jsx(i,{size:"xs",c:"dimmed",children:"Budget"}),e.jsx(i,{size:"sm",fw:500,children:m(t.budget_allocated)})]})]}),t.deliverables&&e.jsxs("div",{style:{marginTop:16},children:[e.jsx(i,{size:"xs",c:"dimmed",mb:"xs",children:"Deliverables"}),e.jsx(i,{size:"sm",children:t.deliverables})]})]},t.id))}):e.jsxs(j,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:[e.jsx(i,{c:"dimmed",ta:"center",fs:"italic",children:"No milestones created yet"}),can("create project")&&e.jsx(d,{justify:"center",mt:"md",children:e.jsx(f,{variant:"light",onClick:()=>y("projects.milestones.create",{project:s.id}),children:"Create First Milestone"})})]})]}),e.jsxs(c.Panel,{value:"budgets",children:[e.jsxs(d,{justify:"space-between",mb:"md",children:[e.jsxs("div",{children:[e.jsx(w,{order:3,children:"Project Budgets"}),e.jsx(i,{c:"dimmed",size:"sm",children:"Track and manage project budgets"})]}),can("create project")&&e.jsx(f,{leftSection:e.jsx(J,{size:16}),onClick:()=>y("projects.budgets.create",{project:s.id}),children:"Add Budget"})]}),s.budgets&&s.budgets.length>0?e.jsx(N,{gap:"md",children:s.budgets.map(t=>{const a=t.total_amount>0?t.spent_amount/t.total_amount*100:0;return e.jsxs(j,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:[e.jsxs(d,{justify:"space-between",mb:"md",children:[e.jsxs("div",{children:[e.jsxs(d,{gap:"sm",children:[e.jsx(i,{fw:600,size:"lg",children:t.name}),e.jsx(Q,{color:l(t.status),children:t.status.toUpperCase()})]}),t.description&&e.jsx(i,{c:"dimmed",size:"sm",mt:"xs",children:t.description})]}),can("edit project")&&e.jsx(f,{size:"xs",variant:"light",onClick:()=>y("projects.budgets.edit",{project:s.id,budget:t.id}),children:"Edit"})]}),e.jsxs(n,{children:[e.jsxs(n.Col,{span:{base:12,sm:6,md:3},children:[e.jsx(i,{size:"xs",c:"dimmed",children:"Total Budget"}),e.jsx(i,{size:"lg",fw:600,children:m(t.total_amount)})]}),e.jsxs(n.Col,{span:{base:12,sm:6,md:3},children:[e.jsx(i,{size:"xs",c:"dimmed",children:"Spent"}),e.jsx(i,{size:"lg",fw:600,c:"red",children:m(t.spent_amount)})]}),e.jsxs(n.Col,{span:{base:12,sm:6,md:3},children:[e.jsx(i,{size:"xs",c:"dimmed",children:"Remaining"}),e.jsx(i,{size:"lg",fw:600,c:"green",children:m(t.remaining_amount)})]}),e.jsxs(n.Col,{span:{base:12,sm:6,md:3},children:[e.jsx(i,{size:"xs",c:"dimmed",mb:"xs",children:"Utilization"}),e.jsx(M,{value:a,color:a>=90?"red":a>=70?"yellow":"green",size:"lg"}),e.jsxs(i,{size:"sm",mt:"xs",children:[a.toFixed(1),"%"]})]})]}),(t.fiscal_year_start||t.fiscal_year_end)&&e.jsxs(d,{mt:"md",children:[e.jsx(i,{size:"xs",c:"dimmed",children:"Fiscal Year:"}),e.jsxs(i,{size:"sm",children:[t.fiscal_year_start," - ",t.fiscal_year_end]})]}),t.notes&&e.jsxs("div",{style:{marginTop:16},children:[e.jsx(i,{size:"xs",c:"dimmed",mb:"xs",children:"Notes"}),e.jsx(i,{size:"sm",children:t.notes})]})]},t.id)})}):e.jsxs(j,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:[e.jsx(i,{c:"dimmed",ta:"center",fs:"italic",children:"No budgets created yet"}),can("create project")&&e.jsx(d,{justify:"center",mt:"md",children:e.jsx(f,{variant:"light",onClick:()=>y("projects.budgets.create",{project:s.id}),children:"Create First Budget"})})]})]}),e.jsxs(c.Panel,{value:"team",children:[e.jsx(w,{order:3,mb:"md",children:"Team Members"}),s.users&&s.users.length>0?e.jsx(n,{children:s.users.map(t=>e.jsx(n.Col,{span:{base:12,sm:6,md:4},children:e.jsx(j,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:e.jsxs(d,{children:[e.jsx(q,{src:t.avatar,size:"lg",radius:"xl",children:Y(t.name)}),e.jsxs("div",{children:[e.jsx(i,{fw:600,children:t.name}),e.jsx(i,{size:"sm",c:"dimmed",children:t.email})]})]})})},t.id))}):e.jsx(j,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:e.jsx(i,{c:"dimmed",ta:"center",fs:"italic",children:"No team members assigned to this project"})})]})]})]})};Ie.layout=s=>e.jsx(ue,{title:"Project Details",children:s});export{Ie as default};
