import{s as X,f as D,h as F,u as H,j as e,B as k,e as O,E as V,i as L,k as $,r as y,F as q,a as E,X as G}from"./app-CQeDVQuS.js";import{E as J}from"./EmptyWithIcon-BBQw9Ob4.js";import{M as K}from"./MainLayout-DgTNt_5R.js";import{c as U,a as Y}from"./datetime-BgfhEWkv.js";import{b as Z,c as ee,a as N}from"./route-DnWyDX0p.js";import{B as te}from"./Breadcrumbs-ClSh7lSV.js";import{T as B}from"./Title-DbfSRF69.js";import{S as se}from"./Select-We5hmp_A.js";import{g as re}from"./get-auto-contrast-value-Da6zqqWm.js";import{A as W}from"./Anchor-B9JFgjO_.js";import{T as R}from"./Text-C7Ogcti-.js";import{T as ie}from"./Tooltip-W_kFrwwB.js";import{C as oe}from"./Center-Bqx9e1q2.js";import{c as z}from"./createReactComponent-Z0-s2Pq0.js";import{I as ae}from"./IconArchive-DjWCh9JN.js";import{I as le}from"./IconMessage-BX9ygqxW.js";import{I as ne}from"./IconEdit-BCZfl_Xd.js";import{I as ce}from"./IconClock-DyW-JlrM.js";import{I as me}from"./IconCheck-CmJOI1ml.js";import{I as pe}from"./IconX-C26Eg-cJ.js";import{I as de}from"./IconPlus-BFuYsGRM.js";import"./FlashNotification-B31qGpz5.js";import"./use-disclosure-CHrwo5eQ.js";import"./IconInfoCircle-BGpsp2Nq.js";import"./IconCircleX-D9_CrJfg.js";import"./useWebSockets-MQGIohH9.js";import"./with-selector-Dx34AVcc.js";import"./index-DSj5ND_Q.js";import"./useTaskGroupsStore-CDXuzMdx.js";import"./reorder-Cl5rjXcS.js";import"./_baseClone-CRHU6voy.js";import"./useTasksStore-DWoe4t5E.js";import"./use-computed-color-scheme-DWNI3ZFj.js";import"./noop-BjFrJKj1.js";import"./get-style-object-DUJZA7T_.js";import"./user-IyQLa11_.js";import"./Menu-CcsqEZJx.js";import"./use-resolved-styles-api-BXRJnP4G.js";import"./Popover-CRA-5r7S.js";import"./use-floating-auto-update-DtQKRGxQ.js";import"./use-uncontrolled-DDoK6Wjp.js";import"./Avatar-D4Eflhk8.js";import"./upper-first-sQkIoMXG.js";import"./IconLayoutList-CL4hKEJq.js";import"./IconUsers-BxnTG7FS.js";import"./ActionIcon-CLNruuHn.js";import"./get-sorted-breakpoints-iwMx6bI5.js";import"./OptionsDropdown-D2SabLis.js";import"./CheckIcon-D3YounCa.js";import"./Combobox-CG5rkmIX.js";import"./Input-BpqpINKS.js";import"./InputBase-BmeHhBbi.js";const[ue,he]=X("Timeline component was not found in tree");var A={root:"m_43657ece",itemTitle:"m_2ebe8099",item:"m_436178ff",itemBullet:"m_8affcee1",itemBody:"m_540e8f41"};const ve={},C=D((r,c)=>{const i=F("TimelineItem",ve,r),{classNames:l,className:o,style:a,styles:t,vars:s,__active:v,__align:g,__lineActive:p,__vars:Q,bullet:I,radius:_,color:d,lineVariant:M,children:f,title:j,mod:S,...T}=i,n=he(),u=H(),m={classNames:l,styles:t};return e.jsxs(k,{...n.getStyles("item",{...m,className:o,style:a}),mod:[{"line-active":p,active:v},S],ref:c,__vars:{"--tli-radius":_?V(_):void 0,"--tli-color":d?O(d,u):void 0,"--tli-border-style":M||void 0},...T,children:[e.jsx(k,{...n.getStyles("itemBullet",m),mod:{"with-child":!!I,align:g,active:v},children:I}),e.jsxs("div",{...n.getStyles("itemBody",m),children:[j&&e.jsx("div",{...n.getStyles("itemTitle",m),children:j}),e.jsx("div",{...n.getStyles("itemContent",m),children:f})]})]})});C.classes=A;C.displayName="@mantine/core/TimelineItem";const fe={active:-1,align:"left",reverseActive:!1},je=$((r,{bulletSize:c,lineWidth:i,radius:l,color:o,autoContrast:a})=>({root:{"--tl-bullet-size":E(c),"--tl-line-width":E(i),"--tl-radius":l===void 0?void 0:V(l),"--tl-color":o?O(o,r):void 0,"--tl-icon-color":re(a,r)?q({color:o,theme:r,autoContrast:a}):void 0}})),h=D((r,c)=>{const i=F("Timeline",fe,r),{classNames:l,className:o,style:a,styles:t,unstyled:s,vars:v,children:g,active:p,color:Q,radius:I,bulletSize:_,align:d,lineWidth:M,reverseActive:f,mod:j,autoContrast:S,...T}=i,n=L({name:"Timeline",classes:A,props:i,className:o,style:a,classNames:l,styles:t,unstyled:s,vars:v,varsResolver:je}),u=y.Children.toArray(g),m=u.map((b,x)=>{var w,P;return y.cloneElement(b,{unstyled:s,__align:d,__active:((w=b.props)==null?void 0:w.active)||(f?p>=u.length-x-1:p>=x),__lineActive:((P=b.props)==null?void 0:P.lineActive)||(f?p>=u.length-x-1:p-1>=x)})});return e.jsx(ue,{value:{getStyles:n},children:e.jsx(k,{...n("root"),mod:[{align:d},j],ref:c,...T,children:m})})});h.classes=A;h.displayName="@mantine/core/Timeline";h.Item=C;/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var xe=z("outline","activity","IconActivity",[["path",{d:"M3 12h4l3 8l4 -16l3 8h4",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ye=z("outline","calendar-month","IconCalendarMonth",[["path",{d:"M4 7a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12z",key:"svg-0"}],["path",{d:"M16 3v4",key:"svg-1"}],["path",{d:"M8 3v4",key:"svg-2"}],["path",{d:"M4 11h16",key:"svg-3"}],["path",{d:"M8 14v4",key:"svg-4"}],["path",{d:"M12 14v4",key:"svg-5"}],["path",{d:"M16 14v4",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ge=z("outline","paperclip","IconPaperclip",[["path",{d:"M15 7l-6.5 6.5a1.5 1.5 0 0 0 3 3l6.5 -6.5a3 3 0 0 0 -6 -6l-6.5 6.5a4.5 4.5 0 0 0 9 9l6.5 -6.5",key:"svg-0"}]]);const Ie=()=>{var a;let{groupedActivities:r,dropdowns:c}=G().props;const[i,l]=y.useState(((a=route().params)==null?void 0:a.project)||"0");y.useEffect(()=>{i>0?Z({project:i}):ee({exclude:["project"]})},[i]);const o=t=>{if(t.includes("archived"))return e.jsx(ae,{size:18});if(t.includes("comment"))return e.jsx(le,{size:18});if(t.includes("was changed"))return e.jsx(ne,{size:18});if(t.includes("Due date"))return e.jsx(ye,{size:18});if(t.includes("Attachment"))return e.jsx(ge,{size:18});if(t.includes("Estimation was set"))return e.jsx(ce,{size:18});if(t.includes("was completed"))return e.jsx(me,{size:18});if(t.includes("uncompleted"))return e.jsx(pe,{size:18});if(t==="New task"||t==="New project"||t.includes("Assigned user"))return e.jsx(de,{size:18})};return e.jsxs(e.Fragment,{children:[e.jsxs(te,{fz:14,mb:30,children:[e.jsx("div",{children:"My Work"}),e.jsx("div",{children:"Projects activity"})]}),e.jsx(B,{order:1,mb:20,children:"Projects activity"}),e.jsx(se,{size:"md",placeholder:"Select project",allowDeselect:!1,value:i,onChange:t=>l(t),data:c.projects,mb:35,maw:260}),Object.keys(r).length?Object.keys(r).map(t=>e.jsxs("div",{children:[e.jsx(B,{order:3,mb:"lg",children:t}),e.jsx(h,{active:9999,bulletSize:32,lineWidth:3,mb:"xl",children:r[t].map(s=>e.jsxs(h.Item,{bullet:o(s.title),children:[e.jsxs("div",{children:[e.jsx(W,{href:"#",fz:"md",fw:600,onClick:()=>N("projects.tasks.open",[s.project.id,s.activity_capable.id]),children:s.title}),e.jsx(R,{c:"dimmed",size:"sm",children:s.subtitle}),e.jsx(W,{href:"#",fz:"xs",onClick:()=>N("projects.tasks",[s.project_id]),children:s.project.name})]}),e.jsx(ie,{label:U(s.created_at),openDelay:1e3,withArrow:!0,children:e.jsx(R,{inline:!0,span:!0,size:"xs",mt:4,children:Y(s.created_at)})})]},s.id))})]},t)):e.jsx(oe,{mih:300,children:e.jsx(J,{title:"No activities found",subtitle:"On projects you have access to",icon:xe})})]})};Ie.layout=r=>e.jsx(K,{title:"Activity",children:r});export{Ie as default};
