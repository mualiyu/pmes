import{j as t,M as L,r as T,P as B,G as l,d as Y,B as r}from"./app-CQeDVQuS.js";import{S as E}from"./Stack-DnbdV9Zg.js";import{T as $}from"./Title-DbfSRF69.js";import{T as h}from"./Text-C7Ogcti-.js";import{S as H}from"./Select-We5hmp_A.js";import{B as R}from"./Badge-CLC16t3z.js";import"./use-resolved-styles-api-BXRJnP4G.js";import"./OptionsDropdown-D2SabLis.js";import"./CheckIcon-D3YounCa.js";import"./Combobox-CG5rkmIX.js";import"./Popover-CRA-5r7S.js";import"./use-floating-auto-update-DtQKRGxQ.js";import"./noop-BjFrJKj1.js";import"./use-uncontrolled-DDoK6Wjp.js";import"./Input-BpqpINKS.js";import"./InputBase-BmeHhBbi.js";const I=[{id:"1",name:"Digital Transformation",startDate:new Date("2024-01-01"),endDate:new Date("2024-07-31"),priority:"High",color:"#51cf66"},{id:"2",name:"Market Expansion",startDate:new Date("2024-03-01"),endDate:new Date("2024-11-30"),priority:"Medium",color:"#ffd43b"},{id:"3",name:"Product Innovation",startDate:new Date("2024-04-01"),endDate:new Date("2024-12-31"),priority:"High",color:"#ff6b6b"},{id:"4",name:"Customer Experience",startDate:new Date("2024-05-01"),endDate:new Date("2024-09-30"),priority:"Medium",color:"#51cf66"},{id:"5",name:"Infrastructure Upgrade",startDate:new Date("2024-01-01"),endDate:new Date("2029-01-01"),priority:"High",color:"#9775fa"}];function G({projects:w=I,title:k="Project Timeline"}){const[D,S]=T.useState("month"),d=T.useMemo(()=>{const a=new Date().getFullYear(),i=w.flatMap(n=>[n.startDate,n.endDate]),s=new Date(Math.min(...i.map(n=>n.getTime()))),p=new Date(Math.max(...i.map(n=>n.getTime()))),o=Math.min(s.getFullYear(),a),c=Math.max(p.getFullYear(),a+5);switch(D){case"year":return{start:new Date(o,0,1),end:new Date(c,11,31),intervals:Array.from({length:c-o+1},(g,m)=>({date:new Date(o+m,0,1),label:(o+m).toString(),width:120})),unitWidth:120};case"month":const n=[];for(let g=o;g<=c;g++)for(let m=0;m<12;m++)n.push({date:new Date(g,m,1),label:new Date(g,m,1).toLocaleDateString("en-US",{month:"short",year:"2-digit"}),width:80});return{start:new Date(o,0,1),end:new Date(c,11,31),intervals:n,unitWidth:80};case"week":const u=[],W=new Date(a,0,1),b=new Date(a+1,0,1),x=new Date(W),v=x.getDay(),z=v===0?1:8-v;x.setDate(x.getDate()+z);let j=1;const y=new Date(x);for(;y<b;)u.push({date:new Date(y),label:`Week ${j}`,width:100}),y.setDate(y.getDate()+7),j++;return{start:x,end:b,intervals:u,unitWidth:100};default:return{start:new Date(o,0,1),end:new Date(c,11,31),intervals:[],unitWidth:80}}},[D,w]),M=e=>{const{start:a,end:i,unitWidth:s}=d,p=i.getTime()-a.getTime(),o=Math.max(e.startDate.getTime(),a.getTime()),c=Math.min(e.endDate.getTime(),i.getTime()),n=(o-a.getTime())/p*(d.intervals.length*s),u=(c-o)/p*(d.intervals.length*s);return{left:n,width:Math.max(u,10)}},P=e=>{switch(e){case"High":return"red";case"Medium":return"yellow";case"Low":return"green";default:return"gray"}},f=(()=>{const e=new Date,{start:a,end:i,unitWidth:s}=d;if(e<a||e>i)return null;const p=i.getTime()-a.getTime();return(e.getTime()-a.getTime())/p*(d.intervals.length*s)})(),C=new Date;return t.jsxs(B,{shadow:"sm",p:"xl",radius:"md",withBorder:!0,children:[t.jsxs(l,{justify:"space-between",mb:"lg",children:[t.jsxs(E,{gap:"xs",children:[t.jsx($,{order:2,children:k}),t.jsxs(h,{size:"sm",c:"dimmed",children:["Today:"," ",C.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]}),t.jsx(H,{value:D,onChange:S,data:[{value:"year",label:"Year"},{value:"month",label:"Month"},{value:"week",label:"Week"}],w:120})]}),t.jsx(Y,{children:t.jsxs(r,{style:{minWidth:"max-content",position:"relative"},children:[t.jsxs(l,{gap:0,mb:"md",style:{borderBottom:"1px solid var(--mantine-color-gray-3)"},children:[t.jsx(r,{w:250,py:"md",px:"md",style:{fontWeight:600,color:"var(--mantine-color-gray-7)",flexShrink:0},children:"Project"}),t.jsx(l,{gap:0,children:d.intervals.map((e,a)=>t.jsx(r,{w:e.width,py:"md",px:"xs",ta:"center",style:{fontSize:"14px",fontWeight:500,color:"var(--mantine-color-gray-6)",borderLeft:a>0?"1px solid var(--mantine-color-gray-2)":"none"},children:e.label},a))})]}),w.map(e=>{const a=M(e);return t.jsxs(l,{gap:0,style:{borderBottom:"1px solid var(--mantine-color-gray-1)","&:hover":{backgroundColor:"var(--mantine-color-gray-0)"},transition:"background-color 0.2s"},children:[t.jsxs(r,{w:250,py:"md",px:"md",style:{flexShrink:0},children:[t.jsx(h,{fw:500,mb:"xs",children:e.name}),t.jsx(R,{color:P(e.priority),size:"sm",children:e.priority})]}),t.jsxs(r,{style:{position:"relative",height:"60px",flex:1},children:[t.jsx(r,{style:{position:"absolute",top:"50%",transform:"translateY(-50%)",left:`${a.left}px`,width:`${a.width}px`,height:"24px",backgroundColor:e.color,borderRadius:"6px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",opacity:.9,cursor:"pointer","&:hover":{opacity:1},transition:"opacity 0.2s"},title:`${e.name}: ${e.startDate.toLocaleDateString()} - ${e.endDate.toLocaleDateString()}`}),d.intervals.map((i,s)=>t.jsx(r,{style:{position:"absolute",top:0,bottom:0,left:s*d.unitWidth,borderLeft:"1px solid var(--mantine-color-gray-2)"}},s))]})]},e.id)}),f!==null&&t.jsx(r,{style:{position:"absolute",top:0,bottom:0,left:`${250+f}px`,pointerEvents:"none",zIndex:10},children:t.jsxs(r,{style:{width:"2px",height:"100%",backgroundColor:"var(--mantine-color-red-6)",position:"relative"},children:[t.jsx(r,{style:{position:"absolute",top:"-8px",left:"-8px",width:"16px",height:"16px",backgroundColor:"var(--mantine-color-red-6)",borderRadius:"50%"}}),t.jsx(h,{size:"xs",c:"red",fw:500,style:{position:"absolute",bottom:"-24px",left:"-16px",whiteSpace:"nowrap"},children:"Today"})]})})]})}),t.jsxs(l,{gap:"lg",mt:"xl",pt:"md",style:{borderTop:"1px solid var(--mantine-color-gray-3)"},children:[t.jsxs(l,{gap:"xs",children:[t.jsx(r,{w:16,h:16,style:{backgroundColor:"var(--mantine-color-red-6)",borderRadius:"4px"}}),t.jsx(h,{size:"sm",c:"dimmed",children:"High Priority"})]}),t.jsxs(l,{gap:"xs",children:[t.jsx(r,{w:16,h:16,style:{backgroundColor:"var(--mantine-color-yellow-6)",borderRadius:"4px"}}),t.jsx(h,{size:"sm",c:"dimmed",children:"Medium Priority"})]}),t.jsxs(l,{gap:"xs",children:[t.jsx(r,{w:16,h:16,style:{backgroundColor:"var(--mantine-color-green-6)",borderRadius:"4px"}}),t.jsx(h,{size:"sm",c:"dimmed",children:"Low Priority"})]}),t.jsxs(l,{gap:"xs",children:[t.jsx(r,{w:2,h:16,style:{backgroundColor:"var(--mantine-color-red-6)"}}),t.jsx(h,{size:"sm",c:"dimmed",children:"Today"})]})]})]})}function ot(){return t.jsx(L,{children:t.jsx("div",{style:{padding:"2rem",backgroundColor:"#f8f9fa",minHeight:"100vh"},children:t.jsx(G,{title:"Default Projects"})})})}export{ot as default};
