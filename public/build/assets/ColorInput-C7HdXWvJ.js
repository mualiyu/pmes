import{r as d,D as ae,j as s,f as le,h as ie,i as ce,k as pe,l as ue,a4 as V}from"./app-CQeDVQuS.js";import{u as de}from"./use-resolved-styles-api-BXRJnP4G.js";import{A as fe}from"./ActionIcon-CLNruuHn.js";import{c as k,p as g,i as v,C as we}from"./ColorPicker-CNOY2v1Y.js";import{C as he}from"./ColorSwatch-MAR8_92F.js";import{I as b}from"./Input-BpqpINKS.js";import{u as me,I as ve}from"./InputBase-BmeHhBbi.js";import{P as z}from"./Popover-CRA-5r7S.js";import{u as ye}from"./use-uncontrolled-DDoK6Wjp.js";function Ce(){return navigator.userAgent.includes("OPR")}function Ie(){const[r,t]=d.useState(!1);ae(()=>{t(typeof window<"u"&&!Ce()&&"EyeDropper"in window)},[]);const i=d.useCallback((f={})=>r?new window.EyeDropper().open(f):Promise.resolve(void 0),[r]);return{supported:r,open:i}}function xe({style:r,...t}){return s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",style:{width:"var(--ci-eye-dropper-icon-size)",height:"var(--ci-eye-dropper-icon-size)",...r},viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[s.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),s.jsx("path",{d:"M11 7l6 6"}),s.jsx("path",{d:"M4 16l11.7 -11.7a1 1 0 0 1 1.4 0l2.6 2.6a1 1 0 0 1 0 1.4l-11.7 11.7h-4v-4z"})]})}var O={eyeDropperIcon:"m_b077c2bc",colorPreview:"m_c5ccdcab",dropdown:"m_5ece2cd7"};const E={format:"hex",fixOnBlur:!0,withPreview:!0,swatchesPerRow:7,withPicker:!0,popoverProps:{transitionProps:{transition:"fade",duration:0}},withEyeDropper:!0},Se=pe((r,{size:t})=>({eyeDropperIcon:{"--ci-eye-dropper-icon-size":V(t,"ci-eye-dropper-icon-size")},colorPreview:{"--ci-preview-size":V(t,"ci-preview-size")}})),A=le((r,t)=>{const i=ie("ColorInput",E,r),{classNames:f,styles:y,unstyled:c,disallowInput:_,fixOnBlur:B,popoverProps:H,withPreview:M,withEyeDropper:L,eyeDropperIcon:T,closeOnColorSwatchClick:G,eyeDropperButtonProps:n,value:U,defaultValue:W,onChange:F,onChangeEnd:a,onClick:C,onFocus:I,onBlur:x,inputProps:S,format:p,wrapperProps:q,readOnly:D,withPicker:N,swatches:P,disabled:R,leftSection:J,rightSection:K,swatchesPerRow:Q,...X}=me("ColorInput",E,r),j=ce({name:"ColorInput",props:i,classes:O,classNames:f,styles:y,unstyled:c,rootSelector:"wrapper",vars:i.vars,varsResolver:Se}),{resolvedClassNames:w,resolvedStyles:h}=de({classNames:f,styles:y,props:i}),[Y,m]=d.useState(!1),[Z,$]=d.useState(""),[o,u]=ye({value:U,defaultValue:W,finalValue:"",onChange:F}),{supported:ee,open:se}=Ie(),oe=s.jsx(fe,{...n,...j("eyeDropperButton",{className:n==null?void 0:n.className,style:n==null?void 0:n.style}),variant:"subtle",color:"gray",size:S.size,unstyled:c,onClick:()=>se().then(e=>{if(e!=null&&e.sRGBHex){const l=k(p,g(e.sRGBHex));u(l),a==null||a(l)}}).catch(()=>{}),children:T||s.jsx(xe,{...j("eyeDropperIcon")})}),re=e=>{I==null||I(e),m(!0)},te=e=>{B&&u(Z),x==null||x(e),m(!1)},ne=e=>{C==null||C(e),m(!0)};return d.useEffect(()=>{(v(o)||o.trim()==="")&&$(o)},[o]),ue(()=>{v(o)&&u(k(p,g(o)))},[p]),s.jsx(b.Wrapper,{...q,classNames:w,styles:h,__staticSelector:"ColorInput",children:s.jsxs(z,{__staticSelector:"ColorInput",position:"bottom-start",offset:5,opened:Y,...H,classNames:w,styles:h,unstyled:c,withRoles:!1,disabled:D||N===!1&&(!Array.isArray(P)||P.length===0),children:[s.jsx(z.Target,{children:s.jsx(b,{autoComplete:"off",...X,...S,classNames:w,styles:h,disabled:R,ref:t,__staticSelector:"ColorInput",onFocus:re,onBlur:te,onClick:ne,spellCheck:!1,value:o,onChange:e=>{const l=e.currentTarget.value;u(l),v(l)&&(a==null||a(k(p,g(l))))},leftSection:J||(M?s.jsx(he,{color:v(o)?o:"#fff",size:"var(--ci-preview-size)",...j("colorPreview")}):null),readOnly:_||D,pointer:_,unstyled:c,rightSection:K||(L&&!R&&!D&&ee?oe:null)})}),s.jsx(z.Dropdown,{onMouseDown:e=>e.preventDefault(),className:O.dropdown,children:s.jsx(we,{__staticSelector:"ColorInput",value:o,onChange:u,onChangeEnd:a,format:p,swatches:P,swatchesPerRow:Q,withPicker:N,size:S.size,focusable:!1,unstyled:c,styles:h,classNames:w,onColorSwatchClick:()=>G&&m(!1)})})]})})});A.classes=ve.classes;A.displayName="@mantine/core/ColorInput";export{A as C};
